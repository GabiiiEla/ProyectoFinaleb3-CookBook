<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>ğŸ“š Mis Recetas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h2 class="text-center mb-4">ğŸ“– Mis Recetas</h2>

    <!-- BÃºsqueda + Botones -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <a href="{% url 'crear_receta' %}" class="btn btn-success">â• Nueva Receta</a>
        
        <form method="get" class="d-flex" role="search">
            <input type="text" name="q" class="form-control me-2" placeholder="Buscar por ingrediente" value="{{ query|default:'' }}">
            <button class="btn btn-outline-primary me-2" type="submit">ğŸ” Buscar</button>
            <a href="{% url 'ver_favoritos' %}" class="btn btn-outline-warning">â­ Ver Favoritos</a>
        </form>
    </div>

    {% if recetas %}
        {% for receta in recetas %}
            <div class="card mb-4 shadow-sm">
                <div class="card-body">
                    <h4 class="card-title">{{ receta.titulo }}</h4>
                    <p><strong>DescripciÃ³n:</strong> {{ receta.descripcion|default:"(Sin descripciÃ³n)" }}</p>
                    <p><strong>CategorÃ­a:</strong> {{ receta.id_categoria }}</p>
                    <p><strong>Tiempo de preparaciÃ³n:</strong> {{ receta.tiempo_preparacion }} minutos</p>
                    <p><strong>Dificultad:</strong> {{ receta.dificultad }}</p>
                    <p><strong>Pasos:</strong><br> {{ receta.pasos }}</p>

                    <hr>
                    <h5>ğŸ§‚ Ingredientes:</h5>
                    <ul>
                        {% for ingrediente in receta.ingredientes %}
                            <li>
                                {{ ingrediente.id_ingrediente.nombre }} - {{ ingrediente.cantidad }}
                                <a href="{% url 'editar_ingrediente' ingrediente.id %}" class="text-warning ms-2">âœï¸</a>
                                <a href="{% url 'eliminar_ingrediente' ingrediente.id %}" class="text-danger ms-2" onclick="return confirm('Â¿Eliminar este ingrediente?');">ğŸ—‘ï¸</a>
                            </li>
                        {% empty %}
                            <li>No hay ingredientes aÃ±adidos</li>
                        {% endfor %}
                    </ul>

                    <!-- BOTONES de acciÃ³n -->
                    <div class="d-flex justify-content-end mt-3">
                        <a href="{% url 'editar_receta' receta.id %}" class="btn btn-warning btn-sm me-2">âœï¸ Editar</a>
                        <a href="{% url 'eliminar_receta' receta.id %}" class="btn btn-danger btn-sm me-2" onclick="return confirm('Â¿EstÃ¡s seguro de eliminar esta receta?');">ğŸ—‘ï¸ Eliminar</a>
                        <a href="{% url 'agregar_favorito' receta.id %}" class="btn btn-outline-success btn-sm">â­ Favorito</a>
                    </div>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="alert alert-info text-center">AÃºn no has creado recetas.</div>
    {% endif %}
</div>
</body>
</html>
